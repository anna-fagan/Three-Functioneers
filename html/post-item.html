<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta
      name="author"
      content="Anna Fagan, Catherine Hawley, Kelly Daniel, Lizbeth Garcia"
    />
    <title>Buyer's Market</title>
    <!-- GOOGLE FONTS-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
      rel="stylesheet"
    />
    <!-- GLOBAL CSS -->
    <link rel="stylesheet" href="../css/style.css" />
    <style>
      /** {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: Verdana, sans-serif;
      }*/ /* Commented out because overiding the global */

      /* Form container */
      form {
        width: 700px;
        /* max-width: 100% !important; */
        margin: 0 auto;
        background-color: #99c1f8;
        padding: 20px 30px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        /*font-family: Verdana, sans-serif;*/
      }

      /* Labels and inputs */
      label {
        display: block;
        margin-bottom: 8px;
        font-weight: bold;
      }

      input,
      select,
      textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 20px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }

      /* ==== Not needed, inherits global styles from css, safe to delete ====
      button {
        padding: 10px 20px;
        margin-right: 10px;
        border: none;
        border-radius: 4px;
        background-color: #2563eb;
        color: white;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }

      button:hover {
        background-color: #005fa3;
      } */

      /* Checkbox and radio layout */
      /* input[type="checkbox"],
      input[type="radio"] {
        width: auto;
        margin-right: 10px;
      } */

      /* Section spacing */
      /* div {
        margin-bottom: 20px;
      } */
    </style>
  </head>

  <!-- === ACTIVE NAV STATE (auto-highlight current page) === -->
  <body class="post-page">
    <!-- GLOBAL HEADER -->
    <header>
      <div class="header-inner">
        <a href="../index.html">
          <img
            src="../images/Logo-Img-Green.png"
            alt="Buyer's Market Logo"
            class="site-logo"
          />
        </a>

        <h1 class="site-title">
          Post
          <span class="divider">|</span>
          <span class="sub-secondary">Pass good things forward</span>
        </h1>
      </div>
    </header>
    <!-- ==== GLOBAL NAVIGATION ==== -->
    <nav>
      <a href="../index.html">Home</a>
      <a href="./post-item.html">Post</a>
      <a href="./listings.html">Browse</a>
      <a href="./notify-form.html">Alerts</a>
      <a href="./about.html">About</a>
    </nav>

    <main>
      <!--Similar to notify-form-->
      <form id="listingForm">
        <label for="firstName">First Name</label>
        <input
          type="text"
          name="firstName"
          id="firstName"
          placeholder="First Name"
          required
        />

        <label for="email">Email</label>
        <input
          type="email"
          name="email"
          id="email"
          placeholder="Email"
          required
        />

        <label for="item">Item</label>
        <input
          type="text"
          name="item"
          id="item"
          placeholder="Item label"
          required
        />

        <label for="price">Price</label>
        <input
          type="text"
          name="price"
          id="price"
          placeholder="Enter 'free' or an amount less than $20"
          required
        />

        <label for="description">Item Description</label>
        <textarea
          name="description"
          id="description"
          placeholder="Describe your item."
        ></textarea>

        <div class="category-card">
          <label>Categories (choose one or more)</label>

          <div class="notify-categories">
            <label
              ><input type="checkbox" name="cat" value="Arts Crafts" /> Arts &
              Crafts</label
            >
            <label
              ><input type="checkbox" name="cat" value="Home Decor" /> Home
              Decor</label
            >
            <label
              ><input type="checkbox" name="cat" value="Home Furnishings" />
              Home Furnishings</label
            >
            <label
              ><input type="checkbox" name="cat" value="Office Supplies" />
              Office Supplies</label
            >
            <label
              ><input type="checkbox" name="cat" value="Packing Materials" />
              Packing Materials</label
            >
          </div>
        </div>

        <div class="category-error-message">
          Choose at least one category to continue.
        </div>

        <button type="reset">Reset</button>
        <button type="submit">Create My Listing</button>
      </form>
    </main>

    <!-- ==== GLOBAL FOOTER ==== -->
    <footer>
      <p>© 2025 Buyer’s Market — Four Functioneers</p>
      <p>Team: Catherine Hawley, Anna Fagan, Kelly Daniel, Lizbeth Garcia</p>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("listingForm");
        const categoryError = document.querySelector(".category-error-message");

        form.addEventListener("submit", (e) => {
          const checkedCategories = document.querySelectorAll(
            'input[name="cat"]:checked'
          );

          // Stop submission if no categories chosen
          if (checkedCategories.length === 0) {
            e.preventDefault();
            categoryError.style.display = "block";
            return;
          }

          // Hide error if fixed
          categoryError.style.display = "none";

          // Gather fields
          const firstName = document.getElementById("firstName").value.trim();
          const item = document.getElementById("item").value.trim();
          const price = document.getElementById("price").value.trim();
          const description = document
            .getElementById("description")
            .value.trim();

          const categories = Array.from(checkedCategories)
            .map((box) => box.value)
            .join(", ");

          // Save to localStorage
          localStorage.setItem("notify_firstName", firstName);
          localStorage.setItem("notify_item", item);
          localStorage.setItem("notify_price", price);
          localStorage.setItem("notify_description", description);
          localStorage.setItem("notify_categories", categories);

          // Redirect
          e.preventDefault();
          window.location.href = "post-confirmation.html";
        });
      });
    </script>
  </body>
</html>
